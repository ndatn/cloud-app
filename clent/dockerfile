FROM node:18-alpine as builder

ARG REACT_APP_API_URL
ARG REACT_APP_MONGODB_URL
ARG REACT_APP_PORT
ARG NODE_ENV

ENV REACT_APP_API_URL=${REACT_APP_API_URL}
ENV REACT_APP_MONGODB_URL=${REACT_APP_MONGODB_URL}
ENV REACT_APP_PORT=${REACT_APP_PORT}
ENV NODE_ENV=${NODE_ENV}

WORKDIR /app
COPY package.json .
RUN npm install --verbose
COPY . .
RUN npm run build
RUN npm install -g serve
EXPOSE 3000
CMD [ "serve", "-s", "build" ]

